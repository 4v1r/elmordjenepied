<!DOCTYPE html>
<html>
<head>
    <title>elmordjenepied.click</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        * {
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #f0f0f0;
            transition: background-color 0.3s ease;
        }

        .dark-mode {
            background-color: #1a1a1a !important;
        }
        
        .controls-container {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 20px;
            z-index: 1000;
        }

        #theme-toggle, #score-container {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #theme-toggle {
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            font-size: 16px;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        #theme-toggle:hover {
            transform: scale(1.05);
        }

        .dark-mode #theme-toggle, .dark-mode #score-container {
            background: rgba(255, 255, 255, 0.2);
        }

        #score {
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        #target {
            position: absolute;
            width: 100px;
            height: 100px;
            user-select: none;
            transition: all 2s ease-in-out;
        }
        
        #draggable {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: move;
            transition: transform 0.1s;
            -webkit-user-drag: element;
            user-select: auto;
        }

        #draggable:hover {
            transform: scale(1.05);
        }

        .score-animation {
            animation: scorePopup 0.5s ease-out;
        }

        @keyframes scorePopup {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="controls-container">
            <button id="theme-toggle">MODE</button>
            <div id="score-container">
                <div id="score">SCORE: 0</div>
            </div>
        </div>
        <img id="target" src="png1.png" draggable="false">
        <img id="draggable" src="png2.png" draggable="true">
    </div>

    <script>
        const draggable = document.getElementById('draggable');
        const target = document.getElementById('target');
        const scoreElement = document.getElementById('score');
        const scoreContainer = document.getElementById('score-container');
        const gameContainer = document.getElementById('game-container');
        const themeToggle = document.getElementById('theme-toggle');
        let score = 0;
        let isDarkMode = false;
        let movementInterval = null;

        function moveRandomly(element) {
            const maxX = window.innerWidth - element.offsetWidth;
            const maxY = window.innerHeight - element.offsetHeight;
            const padding = 50;
            
            const newX = padding + Math.random() * (maxX - 2 * padding);
            const newY = padding + Math.random() * (maxY - 2 * padding);
            
            element.style.transition = 'all 2s ease-in-out';
            element.style.left = newX + 'px';
            element.style.top = newY + 'px';
        }

        function startRandomMovement() {
            if (movementInterval) {
                clearInterval(movementInterval);
            }

            if (score >= 15) {
                movementInterval = setInterval(() => moveRandomly(target), 2000); // Rapide
            } else if (score >= 10) {
                movementInterval = setInterval(() => moveRandomly(target), 3000); // Moyen
            } else if (score >= 5) {
                movementInterval = setInterval(() => moveRandomly(target), 4000); // Lent
            }
        }

        function updateTargetMovement() {
            if (score >= 5) {
                startRandomMovement();
            }
        }

        function randomPosition(element) {
            const maxX = window.innerWidth - element.offsetWidth;
            const maxY = window.innerHeight - element.offsetHeight;
            const padding = 50;
            
            element.style.left = (padding + Math.random() * (maxX - 2 * padding)) + 'px';
            element.style.top = (padding + Math.random() * (maxY - 2 * padding)) + 'px';
        }

        function resetPositions() {
            randomPosition(target);
            randomPosition(draggable);
            updateTargetMovement();
        }

        function animateScore() {
            scoreContainer.classList.add('score-animation');
            setTimeout(() => {
                scoreContainer.classList.remove('score-animation');
            }, 500);
        }

        draggable.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text', e.target.id);
        });

        target.addEventListener('dragover', (e) => {
            e.preventDefault();
        });

        target.addEventListener('drop', (e) => {
            e.preventDefault();
            score++;
            scoreElement.textContent = `SCORE: ${score}`;
            animateScore();
            resetPositions();
        });

        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            gameContainer.classList.toggle('dark-mode');
            if (isDarkMode) {
                gameContainer.style.backgroundColor = '#1a1a1a';
                themeToggle.textContent = 'LIGHT';
            } else {
                gameContainer.style.backgroundColor = '#f0f0f0';
                themeToggle.textContent = 'DARK';
            }
        });

        window.addEventListener('resize', resetPositions);

        window.addEventListener('resize', () => {
            if (movementInterval) {
                clearInterval(movementInterval);
            }
            resetPositions();
        });

        resetPositions();
        themeToggle.textContent = 'SOMBRE';
    </script>
</body>
</html>
