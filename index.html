<!DOCTYPE html>
<html>
<head>
    <title>elmordjenepied.click (v0.1.1)</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        * {
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #f0f0f0;
            transition: background-color 0.3s ease;
        }

        .dark-mode {
            background-color: #1a1a1a !important;
        }
        
        .controls-container {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 20px;
            z-index: 1000;
        }

        #theme-toggle, #score-container {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #theme-toggle {
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            font-size: 16px;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        #theme-toggle:hover {
            transform: scale(1.05);
        }

        .dark-mode #theme-toggle, .dark-mode #score-container {
            background: rgba(255, 255, 255, 0.2);
        }

        #score {
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        #target {
            position: absolute;
            width: 100px;
            height: 100px;
            user-select: none;
        }
        
        #draggable {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: move;
            touch-action: none;
        }

        .score-animation {
            animation: scorePopup 0.5s ease-out;
        }

        @keyframes scorePopup {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="controls-container">
            <button id="theme-toggle">MODE</button>
            <div id="score-container">
                <div id="score">SCORE: 0</div>
            </div>
        </div>
        <img id="target" src="png1.png">
        <img id="draggable" src="png2.png">
    </div>

    <script>
        const draggable = document.getElementById('draggable');
        const target = document.getElementById('target');
        const scoreElement = document.getElementById('score');
        const scoreContainer = document.getElementById('score-container');
        const gameContainer = document.getElementById('game-container');
        const themeToggle = document.getElementById('theme-toggle');
        let score = 0;
        let isDarkMode = false;
        let movementInterval = null;
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        function moveTarget() {
            const maxX = window.innerWidth - target.offsetWidth;
            const maxY = window.innerHeight - target.offsetHeight;
            const padding = 50;
            
            const newX = padding + Math.random() * (maxX - 2 * padding);
            const newY = padding + Math.random() * (maxY - 2 * padding);
            
            target.style.transition = 'all 1s ease-in-out';
            target.style.left = newX + 'px';
            target.style.top = newY + 'px';
        }

        function startTargetMovement() {
            if (movementInterval) {
                clearInterval(movementInterval);
            }

            let interval;
            if (score >= 15) {
                interval = 1000;
            } else if (score >= 10) {
                interval = 2000;
            } else if (score >= 5) {
                interval = 3000;
            }

            if (interval) {
                moveTarget();
                movementInterval = setInterval(moveTarget, interval);
            }
        }

        function resetPositions() {
            xOffset = 0;
            yOffset = 0;
            draggable.style.transform = 'translate(0px, 0px)';
            
            const maxX = window.innerWidth - draggable.offsetWidth;
            const maxY = window.innerHeight - draggable.offsetHeight;
            const padding = 50;
            
            draggable.style.left = (padding + Math.random() * (maxX - 2 * padding)) + 'px';
            draggable.style.top = (padding + Math.random() * (maxY - 2 * padding)) + 'px';
            
            if (score < 5) {
                target.style.left = (window.innerWidth / 2 - target.offsetWidth / 2) + 'px';
                target.style.top = (window.innerHeight / 2 - target.offsetHeight / 2) + 'px';
            } else {
                target.style.left = (padding + Math.random() * (maxX - 2 * padding)) + 'px';
                target.style.top = (padding + Math.random() * (maxY - 2 * padding)) + 'px';
            }
            
            startTargetMovement();
        }

        function dragStart(e) {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;

            if (e.target === draggable) {
                isDragging = true;
            }
        }

        function drag(e) {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
                xOffset = currentX;
                yOffset = currentY;

                draggable.style.transform = `translate(${currentX}px, ${currentY}px)`;
            }
        }

        function dragEnd(e) {
            if (isDragging) {
                const targetRect = target.getBoundingClientRect();
                const draggableRect = draggable.getBoundingClientRect();

                if (isOverlapping(draggableRect, targetRect)) {
                    score++;
                    scoreElement.textContent = `SCORE: ${score}`;
                    animateScore();
                    resetPositions();
                }

                isDragging = false;
            }
        }

        function isOverlapping(rect1, rect2) {
            return !(rect1.right < rect2.left || 
                rect1.left > rect2.right || 
                rect1.bottom < rect2.top || 
                rect1.top > rect2.bottom);
        }

        function animateScore() {
            scoreContainer.classList.add('score-animation');
            setTimeout(() => {
                scoreContainer.classList.remove('score-animation');
            }, 500);
        }

        draggable.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            gameContainer.classList.toggle('dark-mode');
            if (isDarkMode) {
                gameContainer.style.backgroundColor = '#1a1a1a';
                themeToggle.textContent = 'LIGHT';
            } else {
                gameContainer.style.backgroundColor = '#f0f0f0';
                themeToggle.textContent = 'DARK';
            }
        });

        window.addEventListener('resize', () => {
            if (movementInterval) {
                clearInterval(movementInterval);
            }
            resetPositions();
        });

        resetPositions();
        themeToggle.textContent = 'DARK';
    </script>
</body>
</html>
